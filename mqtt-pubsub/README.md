Based of example in https://esp32tutorials.com/esp32-mqtt-client-publish-subscribe-esp-idf/